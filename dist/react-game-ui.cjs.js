"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react");function r(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e)for(const t in e)if("default"!==t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:()=>e[t]})}return r.default=e,Object.freeze(r)}const t=r(e);var n,o={exports:{}},a={};var i,s,l={};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function c(){return i||(i=1,"production"!==process.env.NODE_ENV&&function(){var r=e,t=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),g=Symbol.iterator;var h=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function x(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];!function(e,r,t){var n=h.ReactDebugCurrentFrame.getStackAddendum();""!==n&&(r+="%s",t=t.concat([n]));var o=t.map(function(e){return String(e)});o.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,o)}("error",e,t)}var v;function b(e){return e.displayName||"Context"}function k(e){if(null==e)return null;if("number"==typeof e.tag&&x("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case o:return"Fragment";case n:return"Portal";case i:return"Profiler";case a:return"StrictMode";case p:return"Suspense";case u:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case c:return b(e)+".Consumer";case s:return b(e._context)+".Provider";case d:return function(e,r,t){var n=e.displayName;if(n)return n;var o=r.displayName||r.name||"";return""!==o?t+"("+o+")":t}(e,e.render,"ForwardRef");case f:var r=e.displayName||null;return null!==r?r:k(e.type)||"Memo";case y:var t=e,l=t._payload,m=t._init;try{return k(m(l))}catch(g){return null}}return null}v=Symbol.for("react.module.reference");var j,_,S,w,C,I,O,P=Object.assign,$=0;function R(){}R.__reactDisabledLog=!0;var E,F=h.ReactCurrentDispatcher;function T(e,r,t){if(void 0===E)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return"\n"+E+e}var N,D=!1,W="function"==typeof WeakMap?WeakMap:Map;function z(e,r){if(!e||D)return"";var t,n=N.get(e);if(void 0!==n)return n;D=!0;var o,a=Error.prepareStackTrace;Error.prepareStackTrace=void 0,o=F.current,F.current=null,function(){if(0===$){j=console.log,_=console.info,S=console.warn,w=console.error,C=console.group,I=console.groupCollapsed,O=console.groupEnd;var e={configurable:!0,enumerable:!0,value:R,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}$++}();try{if(r){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(y){t=y}Reflect.construct(e,[],i)}else{try{i.call()}catch(y){t=y}e.call(i.prototype)}}else{try{throw Error()}catch(y){t=y}e()}}catch(m){if(m&&t&&"string"==typeof m.stack){for(var s=m.stack.split("\n"),l=t.stack.split("\n"),c=s.length-1,d=l.length-1;c>=1&&d>=0&&s[c]!==l[d];)d--;for(;c>=1&&d>=0;c--,d--)if(s[c]!==l[d]){if(1!==c||1!==d)do{if(c--,--d<0||s[c]!==l[d]){var p="\n"+s[c].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),"function"==typeof e&&N.set(e,p),p}}while(c>=1&&d>=0);break}}}finally{D=!1,F.current=o,function(){if(0===--$){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:P({},e,{value:j}),info:P({},e,{value:_}),warn:P({},e,{value:S}),error:P({},e,{value:w}),group:P({},e,{value:C}),groupCollapsed:P({},e,{value:I}),groupEnd:P({},e,{value:O})})}$<0&&x("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=a}var u=e?e.displayName||e.name:"",f=u?T(u):"";return"function"==typeof e&&N.set(e,f),f}function B(e,r,t){if(null==e)return"";if("function"==typeof e)return z(e,!(!(n=e.prototype)||!n.isReactComponent));var n;if("string"==typeof e)return T(e);switch(e){case p:return T("Suspense");case u:return T("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case d:return z(e.render,!1);case f:return B(e.type,r,t);case y:var o=e,a=o._payload,i=o._init;try{return B(i(a),r,t)}catch(s){}}return""}N=new W;var L=Object.prototype.hasOwnProperty,U={},M=h.ReactDebugCurrentFrame;function A(e){if(e){var r=e._owner,t=B(e.type,e._source,r?r.type:null);M.setExtraStackFrame(t)}else M.setExtraStackFrame(null)}var V=Array.isArray;function Y(e){return V(e)}function q(e){return""+e}function H(e){if(function(e){try{return q(e),!1}catch(r){return!0}}(e))return x("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),q(e)}var J,K,X=h.ReactCurrentOwner,G={key:!0,ref:!0,__self:!0,__source:!0};function Q(e,r,n,o,a){var i,s={},l=null,c=null;for(i in void 0!==n&&(H(n),l=""+n),function(e){if(L.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return void 0!==e.key}(r)&&(H(r.key),l=""+r.key),function(e){if(L.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return void 0!==e.ref}(r)&&(c=r.ref,function(e){"string"==typeof e.ref&&X.current}(r)),r)L.call(r,i)&&!G.hasOwnProperty(i)&&(s[i]=r[i]);if(e&&e.defaultProps){var d=e.defaultProps;for(i in d)void 0===s[i]&&(s[i]=d[i])}if(l||c){var p="function"==typeof e?e.displayName||e.name||"Unknown":e;l&&function(e,r){var t=function(){J||(J=!0,x("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};t.isReactWarning=!0,Object.defineProperty(e,"key",{get:t,configurable:!0})}(s,p),c&&function(e,r){var t=function(){K||(K=!0,x("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};t.isReactWarning=!0,Object.defineProperty(e,"ref",{get:t,configurable:!0})}(s,p)}return function(e,r,n,o,a,i,s){var l={$$typeof:t,type:e,key:r,ref:n,props:s,_owner:i,_store:{}};return Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l}(e,l,c,a,o,X.current,s)}var Z,ee=h.ReactCurrentOwner,re=h.ReactDebugCurrentFrame;function te(e){if(e){var r=e._owner,t=B(e.type,e._source,r?r.type:null);re.setExtraStackFrame(t)}else re.setExtraStackFrame(null)}function ne(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}function oe(){if(ee.current){var e=k(ee.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}Z=!1;var ae={};function ie(e,r){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var t=function(e){var r=oe();if(!r){var t="string"==typeof e?e:e.displayName||e.name;t&&(r="\n\nCheck the top-level render call using <"+t+">.")}return r}(r);if(!ae[t]){ae[t]=!0;var n="";e&&e._owner&&e._owner!==ee.current&&(n=" It was passed a child from "+k(e._owner.type)+"."),te(e),x('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',t,n),te(null)}}}function se(e,r){if("object"==typeof e)if(Y(e))for(var t=0;t<e.length;t++){var n=e[t];ne(n)&&ie(n,r)}else if(ne(e))e._store&&(e._store.validated=!0);else if(e){var o=function(e){if(null===e||"object"!=typeof e)return null;var r=g&&e[g]||e["@@iterator"];return"function"==typeof r?r:null}(e);if("function"==typeof o&&o!==e.entries)for(var a,i=o.call(e);!(a=i.next()).done;)ne(a.value)&&ie(a.value,r)}}function le(e){var r,t=e.type;if(null!=t&&"string"!=typeof t){if("function"==typeof t)r=t.propTypes;else{if("object"!=typeof t||t.$$typeof!==d&&t.$$typeof!==f)return;r=t.propTypes}if(r){var n=k(t);!function(e,r,t,n,o){var a=Function.call.bind(L);for(var i in e)if(a(e,i)){var s=void 0;try{if("function"!=typeof e[i]){var l=Error((n||"React class")+": "+t+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}s=e[i](r,i,n,t,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(c){s=c}!s||s instanceof Error||(A(o),x("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",n||"React class",t,i,typeof s),A(null)),s instanceof Error&&!(s.message in U)&&(U[s.message]=!0,A(o),x("Failed %s type: %s",t,s.message),A(null))}}(r,e.props,"prop",n,e)}else if(void 0!==t.PropTypes&&!Z){Z=!0,x("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",k(t)||"Unknown")}"function"!=typeof t.getDefaultProps||t.getDefaultProps.isReactClassApproved||x("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var ce={};function de(e,r,n,l,g,h){var b=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===i||e===a||e===p||e===u||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===f||e.$$typeof===s||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||void 0!==e.getModuleId)}(e);if(!b){var j="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(j+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var _;j+=oe(),null===e?_="null":Y(e)?_="array":void 0!==e&&e.$$typeof===t?(_="<"+(k(e.type)||"Unknown")+" />",j=" Did you accidentally export a JSX literal instead of a component?"):_=typeof e,x("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",_,j)}var S=Q(e,r,n,g,h);if(null==S)return S;if(b){var w=r.children;if(void 0!==w)if(l)if(Y(w)){for(var C=0;C<w.length;C++)se(w[C],e);Object.freeze&&Object.freeze(w)}else x("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else se(w,e)}if(L.call(r,"key")){var I=k(e),O=Object.keys(r).filter(function(e){return"key"!==e}),P=O.length>0?"{key: someKey, "+O.join(": ..., ")+": ...}":"{key: someKey}";if(!ce[I+P])x('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',P,I,O.length>0?"{"+O.join(": ..., ")+": ...}":"{}",I),ce[I+P]=!0}return e===o?function(e){for(var r=Object.keys(e.props),t=0;t<r.length;t++){var n=r[t];if("children"!==n&&"key"!==n){te(e),x("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",n),te(null);break}}null!==e.ref&&(te(e),x("Invalid attribute `ref` supplied to `React.Fragment`."),te(null))}(S):le(S),S}var pe=function(e,r,t){return de(e,r,t,!1)},ue=function(e,r,t){return de(e,r,t,!0)};l.Fragment=o,l.jsx=pe,l.jsxs=ue}()),l}var d=(s||(s=1,"production"===process.env.NODE_ENV?o.exports=function(){if(n)return a;n=1;var r=e,t=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,n){var o,a={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(d=r.ref),r)i.call(r,o)&&!l.hasOwnProperty(o)&&(a[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===a[o]&&(a[o]=r[o]);return{$$typeof:t,type:e,key:c,ref:d,props:a,_owner:s.current}}return a.Fragment=o,a.jsx=c,a.jsxs=c,a}():o.exports=c()),o.exports);const p={card:"_card_1mv54_3",tooltip:"_tooltip_1mv54_23",cardBack:"_cardBack_1mv54_47",deckContainer:"_deckContainer_1mv54_59",deckCard:"_deckCard_1mv54_66",deckCardFront:"_deckCardFront_1mv54_78",deckSection:"_deckSection_1mv54_95",discardPileWrapper:"_discardPileWrapper_1mv54_103",discardTopCard:"_discardTopCard_1mv54_109"},u=({card:e})=>e.isFaceUp?e.frontImage?d.jsx("img",{src:e.frontImage,alt:e.name,style:{width:"100%",height:"100%",objectFit:"contain"}}):(console.log(`[CardContent] pngの描画失敗" ${e.id}. Path: ${e.frontImage}`),d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",padding:"5px"},children:d.jsx("strong",{style:{fontSize:"1em",wordBreak:"break-all",textAlign:"center"},children:e.name})})):null;function f(e,...r){console.log(`[${e}]`,...r)}const y=({card:e,isFaceUp:r})=>r?e.frontImage?d.jsx("img",{src:e.frontImage,alt:e.name,style:{width:"100%",height:"100%",objectFit:"contain"}}):d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",padding:"5px",color:"#333"},children:d.jsx("strong",{style:{fontSize:"0.8em",wordBreak:"break-all",textAlign:"center"},children:e.name})}):null;const m=t.memo(({card:e,isFaceUp:r})=>r?e.frontImage?d.jsx("img",{src:e.frontImage,alt:e.name,style:{width:"100%",height:"100%",objectFit:"contain"}}):d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",padding:"5px",color:"#333"},children:d.jsx("strong",{style:{fontSize:"0.8em",wordBreak:"break-all",textAlign:"center"},children:e.name})}):null),g=t.memo(({tokens:e,socket:r,myPlayerId:t,playerIdBeingDisplayed:n})=>{const o=t===n;return e&&0!==e.length?d.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #ddd"},children:e.map(e=>d.jsx("div",{title:`クリックして再獲得: ${e.name}`,style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#ffffffff",borderRadius:"50%",width:"48px",height:"48px",fontSize:"0.75em",fontWeight:"bold",textAlign:"center",lineHeight:"1.1",boxShadow:"0 2px 5px rgba(0,0,0,0.2)",cursor:o?"pointer":"default",opacity:o?1:.7,flexShrink:0,wordBreak:"break-word",padding:"2px"},children:e.name},e.id))}):null}),h=t.memo(({player:e,currentPlayerId:r,myPlayerId:t,selectedCards:n,toggleCardSelection:o,socket:a})=>d.jsxs("li",{style:{padding:"6px 12px",marginBottom:"6px",borderRadius:"4px",backgroundColor:e.id===r?"#a0e7ff":"#f5f5f5",fontWeight:e.id===r?"bold":"normal"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("span",{style:{fontSize:"1.1em",color:"#333"},children:[e.id===r&&"ᐅ ",e.id===t&&"★ ME ",e.name]}),d.jsxs("span",{style:{fontSize:"1.2em"},children:["スコア: ",e.score]})]}),e.resources&&e.resources.length>0&&d.jsxs("div",{style:{display:"block",marginTop:"4px",marginBottom:"8px",fontSize:"0.9em",color:"#333"},children:[d.jsx("strong",{style:{display:"block",marginBottom:"4px"},children:"リソース:"}),d.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:e.resources.map(e=>d.jsxs("span",{title:e.name,style:{padding:"4px 8px",backgroundColor:"#f0f0f0",borderRadius:"4px",whiteSpace:"nowrap"},children:[e.icon," ",e.name,": ",e.currentValue," / ",e.maxValue]},e.id))})]}),e.tokens&&e.tokens.length>0&&d.jsx(g,{tokens:e.tokens,socket:a,myPlayerId:t,playerIdBeingDisplayed:e.id}),d.jsx("div",{style:{display:"flex",gap:"6px",marginTop:"6px",flexWrap:"wrap"},children:e.cards.map(r=>{const a=!!r.isFaceUp&&e.id===t,i=n.includes(r.id);return d.jsxs("div",{className:a?p.card:p.cardBack,style:{position:"relative",cursor:a?"pointer":"default",backgroundColor:a?void 0:r.backColor,border:i?"2px solid gold":"none",boxSizing:"border-box",display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>o(r.id,a),children:[d.jsx(m,{card:r,isFaceUp:a}),a&&r.description&&d.jsx("span",{className:p.tooltip,children:r.description})]},r.id)})})]},e.id),(e,r)=>e.player===r.player&&e.selectedCards===r.selectedCards&&e.myPlayerId===r.myPlayerId&&e.currentPlayerId===r.currentPlayerId);exports.Deck=function({socket:e,deckId:r,name:n,playerId:o=null}){const[a,i]=t.useState([]),[s,l]=t.useState([]),[c,f]=t.useState([]),[y,m]=t.useState(!1);return t.useEffect(()=>(e.on(`deck:init:${r}`,e=>{i(e.currentDeck.map(e=>({...e,deckId:r}))),l(e.drawnCards.map(e=>({...e,deckId:r}))),f(e.discardPile.map(e=>({...e,deckId:r})))}),e.on(`deck:update:${r}`,e=>{console.log("drawnCards:",e.drawnCards),console.log("[Deck Update] discardPile:",e.discardPile),i(e.currentDeck.map(e=>({...e,deckId:r}))),l(e.drawnCards.map(e=>({...e,deckId:r}))),f(e.discardPile.map(e=>({...e,deckId:r})))}),()=>{e.off(`deck:init:${r}`),e.off(`deck:update:${r}`)}),[e,r]),d.jsxs("section",{className:p.deckSection,children:[d.jsx("h3",{style:{marginBottom:"6px"},children:n}),d.jsxs("div",{className:p.deckControls,children:[d.jsx("button",{onClick:()=>e.emit("deck:shuffle",{deckId:r}),children:"シャッフル"}),d.jsx("button",{onClick:()=>e.emit("deck:reset",{deckId:r}),children:"山札に戻す"})]}),d.jsxs("div",{className:p.deckWrapper,style:{display:"flex",gap:"0px"},children:[d.jsx("div",{className:p.deckContainer,onClick:()=>{if(0===a.length)return;const t=a[0],n=t?.drawLocation||"hand",i={deckId:r,drawLocation:n};"hand"===n&&o&&(i.playerId=o),e.emit("deck:draw",i)},children:a.map((e,r)=>d.jsx("div",{className:p.deckCard,style:{zIndex:a.length-r,transform:`translate(${.3*r}px, ${.3*r}px)`,backgroundColor:e.backColor}},e.id))}),d.jsx("div",{className:p.deckContainer,children:s.map((e,r)=>d.jsx("div",{className:p.deckCardFront,style:{zIndex:r+1,transform:`translate(${.3*r}px, ${.3*r}px)`},children:d.jsx(u,{card:e})},e.id))}),d.jsx("div",{className:`${p.deckContainer} ${p.discardPileWrapper}`,children:c.length>0&&(()=>{const e=c[c.length-1];return d.jsxs("div",{className:`${p.deckCardFront} ${p.discardTopCard}`,style:{pointerEvents:"auto"},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[d.jsx(u,{card:e}),e.description&&d.jsx("span",{className:p.tooltip,style:{visibility:y?"visible":"hidden",opacity:y?1:0,zIndex:9999},children:e.description})]},e.id)})()})]})]})},exports.Dice=function({sides:r=6,socket:t=null,diceId:n,onRoll:o}){const[a,i]=e.useState(null),[s,l]=e.useState(!1),c=e.useRef(null);return e.useEffect(()=>{if(!t)return;const e=e=>{l(!0);let t=0;c.current=setInterval(()=>{const n=Math.floor(Math.random()*r)+1;i(n),t++,t>=20&&(clearInterval(c.current),c.current=null,i(e),l(!1),o?.(e))},50)};return t.on(`dice:rolled:${n}`,e),()=>{t.off(`dice:rolled:${n}`,e),c.current&&clearInterval(c.current)}},[t,r,n,o]),d.jsx("div",{style:{width:"80px",height:"80px",border:"2px solid #333",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",fontWeight:"bold",cursor:s?"not-allowed":"pointer",userSelect:"none",backgroundColor:"#fff",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",transition:"transform 0.2s"},onClick:()=>{t&&!s&&t.emit("dice:roll",{diceId:n,sides:r})},children:a??"🎲"})},exports.PlayField=function({socket:e,deckId:r,name:n,is_logging:o=!1}){const[a,i]=t.useState([]);return t.useEffect(()=>{const t=e=>{const t=e.playFieldCards||[];o&&(f("playField",`[${r}] 場の状態を更新`),f("playField",`[${r}] 古いカード数: ${a.length}, 新しいカード数: ${t.length}`),f("playField",`[${r}] 受信したカードリスト:`,t.map(e=>e.name))),i(e.playFieldCards||[])};return e.on(`deck:update:${r}`,t),()=>{e.off(`deck:update:${r}`,t)}},[e,r]),d.jsxs("section",{style:{border:"2px dashed #ccc",borderRadius:"10px",padding:"12px",background:"#fafafa"},children:[d.jsxs("h3",{style:{marginBottom:"8px"},children:["プレイエリア",n&&d.jsxs("span",{style:{marginLeft:"10px",fontWeight:"normal",fontSize:"0.9em",color:"#666"},children:["（",n,"）"]})]}),d.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",minHeight:"120px"},children:[0===a.length&&d.jsx("div",{style:{opacity:.6},children:"（まだカードが出ていません）"}),a.map(r=>d.jsxs("div",{className:p.card,style:{cursor:"pointer",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},onDoubleClick:()=>(r=>{r.ownerId?(e.emit("card:return-to-hand",{deckId:r.deckId,cardId:r.id,targetPlayerId:r.ownerId}),f("playField",`カード ${r.name} を持ち主 ${r.ownerId} の手札に戻すようリクエスト`)):f("playField",`警告: ${r.name} には所有者IDが設定されていません。手札に戻せません。`)})(r),children:[d.jsx(y,{card:r,isFaceUp:!0}),r.description&&d.jsx("span",{className:p.tooltip,children:r.description})]},r.id))]})]})},exports.ScoreBoard=function({socket:e,players:r,currentPlayerId:n,myPlayerId:o,backColor:a="#000000ff"}){const i=t.useMemo(()=>(r||[]).map(e=>({...e,score:e.score??0,cards:e.cards??[],resources:e.resources??[],tokens:e.tokens??[]})),[r]),[s,l]=t.useState([]),c=t.useCallback((e,r)=>{r&&l(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},[]),p=t.useCallback(()=>{if(0===s.length||!o)return;const r=i.find(e=>e.id===o);if(!r)return;const t={};let n;s.forEach(e=>{const o=r.cards.find(r=>r.id===e);o&&(n||(n=o.playLocation),t[o.deckId]||(t[o.deckId]=[]),t[o.deckId].push(o.id))}),n&&(Object.entries(t).forEach(([r,t])=>{e.emit("card:play",{deckId:r,cardIds:t,playerId:o,playLocation:n})}),l([]))},[s,o,i,e]),u=t.useCallback(()=>e.emit("game:next-turn"),[e]);return d.jsxs("div",{style:{padding:"16px",border:"1px solid #333",borderRadius:"12px",backgroundColor:"#f9f9f9",maxWidth:"900px",margin:"0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[d.jsx("h2",{style:{fontSize:"1.5em",marginBottom:"12px",borderBottom:"2px solid #ddd",paddingBottom:"8px"},children:"ゲームスコアボード"}),d.jsx("ul",{style:{listStyle:"none",padding:0},children:i.map(r=>d.jsx(h,{player:r,currentPlayerId:n,myPlayerId:o,selectedCards:s,toggleCardSelection:c,socket:e},r.id))}),d.jsxs("div",{style:{marginTop:"12px",display:"flex",gap:"6px"},children:[d.jsx("button",{onClick:p,disabled:0===s.length,children:"選択カードを出す"}),d.jsx("button",{onClick:u,children:"次のターン"})]})]})},exports.Timer=function({socket:r=null,onFinish:t}){const[n,o]=e.useState(null);return e.useEffect(()=>{if(!r)return;const e=e=>{o(e)},n=e=>{o(e),e<=0&&t?.()};return r.on("timer:start",e),r.on("timer:update",n),()=>{r.off("timer:start",e),r.off("timer:update",n)}},[r,t]),d.jsxs("div",{style:{width:"300px",height:"80px",border:"2px solid #333",borderRadius:"8px",padding:"8px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f9f9f9",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",fontFamily:"sans-serif"},children:[d.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:null!==n?n<=6?"red":n<=15?"orange":"green":"gray",transition:"color 0.5s ease"},children:["残り時間: ",n??"-","s"]}),d.jsx("div",{style:{marginTop:"6px"},children:d.jsx("button",{onClick:()=>{r&&r.emit("timer:start",30)},style:{marginRight:"4px"},children:"開始"})})]})};
