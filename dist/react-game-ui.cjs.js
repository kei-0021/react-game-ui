"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react");function r(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e)for(const t in e)if("default"!==t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:()=>e[t]})}return r.default=e,Object.freeze(r)}const t=r(e);var n,o={exports:{}},a={};var i,s,c={};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function l(){return i||(i=1,"production"!==process.env.NODE_ENV&&function(){var r=e,t=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),g=Symbol.iterator;var h=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];!function(e,r,t){var n=h.ReactDebugCurrentFrame.getStackAddendum();""!==n&&(r+="%s",t=t.concat([n]));var o=t.map(function(e){return String(e)});o.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,o)}("error",e,t)}var v;function x(e){return e.displayName||"Context"}function k(e){if(null==e)return null;if("number"==typeof e.tag&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case o:return"Fragment";case n:return"Portal";case i:return"Profiler";case a:return"StrictMode";case u:return"Suspense";case d:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case l:return x(e)+".Consumer";case s:return x(e._context)+".Provider";case p:return function(e,r,t){var n=e.displayName;if(n)return n;var o=r.displayName||r.name||"";return""!==o?t+"("+o+")":t}(e,e.render,"ForwardRef");case f:var r=e.displayName||null;return null!==r?r:k(e.type)||"Memo";case y:var t=e,c=t._payload,m=t._init;try{return k(m(c))}catch(g){return null}}return null}v=Symbol.for("react.module.reference");var j,_,S,w,C,O,R,E=Object.assign,I=0;function $(){}$.__reactDisabledLog=!0;var P,T=h.ReactCurrentDispatcher;function F(e,r,t){if(void 0===P)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);P=n&&n[1]||""}return"\n"+P+e}var N,D=!1,z="function"==typeof WeakMap?WeakMap:Map;function W(e,r){if(!e||D)return"";var t,n=N.get(e);if(void 0!==n)return n;D=!0;var o,a=Error.prepareStackTrace;Error.prepareStackTrace=void 0,o=T.current,T.current=null,function(){if(0===I){j=console.log,_=console.info,S=console.warn,w=console.error,C=console.group,O=console.groupCollapsed,R=console.groupEnd;var e={configurable:!0,enumerable:!0,value:$,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}I++}();try{if(r){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(y){t=y}Reflect.construct(e,[],i)}else{try{i.call()}catch(y){t=y}e.call(i.prototype)}}else{try{throw Error()}catch(y){t=y}e()}}catch(m){if(m&&t&&"string"==typeof m.stack){for(var s=m.stack.split("\n"),c=t.stack.split("\n"),l=s.length-1,p=c.length-1;l>=1&&p>=0&&s[l]!==c[p];)p--;for(;l>=1&&p>=0;l--,p--)if(s[l]!==c[p]){if(1!==l||1!==p)do{if(l--,--p<0||s[l]!==c[p]){var u="\n"+s[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),"function"==typeof e&&N.set(e,u),u}}while(l>=1&&p>=0);break}}}finally{D=!1,T.current=o,function(){if(0===--I){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:E({},e,{value:j}),info:E({},e,{value:_}),warn:E({},e,{value:S}),error:E({},e,{value:w}),group:E({},e,{value:C}),groupCollapsed:E({},e,{value:O}),groupEnd:E({},e,{value:R})})}I<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=a}var d=e?e.displayName||e.name:"",f=d?F(d):"";return"function"==typeof e&&N.set(e,f),f}function L(e,r,t){if(null==e)return"";if("function"==typeof e)return W(e,!(!(n=e.prototype)||!n.isReactComponent));var n;if("string"==typeof e)return F(e);switch(e){case u:return F("Suspense");case d:return F("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case p:return W(e.render,!1);case f:return L(e.type,r,t);case y:var o=e,a=o._payload,i=o._init;try{return L(i(a),r,t)}catch(s){}}return""}N=new z;var M=Object.prototype.hasOwnProperty,U={},B=h.ReactDebugCurrentFrame;function A(e){if(e){var r=e._owner,t=L(e.type,e._source,r?r.type:null);B.setExtraStackFrame(t)}else B.setExtraStackFrame(null)}var Y=Array.isArray;function q(e){return Y(e)}function V(e){return""+e}function X(e){if(function(e){try{return V(e),!1}catch(r){return!0}}(e))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),V(e)}var J,K,H=h.ReactCurrentOwner,G={key:!0,ref:!0,__self:!0,__source:!0};function Q(e,r,n,o,a){var i,s={},c=null,l=null;for(i in void 0!==n&&(X(n),c=""+n),function(e){if(M.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return void 0!==e.key}(r)&&(X(r.key),c=""+r.key),function(e){if(M.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return void 0!==e.ref}(r)&&(l=r.ref,function(e){"string"==typeof e.ref&&H.current}(r)),r)M.call(r,i)&&!G.hasOwnProperty(i)&&(s[i]=r[i]);if(e&&e.defaultProps){var p=e.defaultProps;for(i in p)void 0===s[i]&&(s[i]=p[i])}if(c||l){var u="function"==typeof e?e.displayName||e.name||"Unknown":e;c&&function(e,r){var t=function(){J||(J=!0,b("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};t.isReactWarning=!0,Object.defineProperty(e,"key",{get:t,configurable:!0})}(s,u),l&&function(e,r){var t=function(){K||(K=!0,b("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};t.isReactWarning=!0,Object.defineProperty(e,"ref",{get:t,configurable:!0})}(s,u)}return function(e,r,n,o,a,i,s){var c={$$typeof:t,type:e,key:r,ref:n,props:s,_owner:i,_store:{}};return Object.defineProperty(c._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(c,"_self",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(c,"_source",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.freeze&&(Object.freeze(c.props),Object.freeze(c)),c}(e,c,l,a,o,H.current,s)}var Z,ee=h.ReactCurrentOwner,re=h.ReactDebugCurrentFrame;function te(e){if(e){var r=e._owner,t=L(e.type,e._source,r?r.type:null);re.setExtraStackFrame(t)}else re.setExtraStackFrame(null)}function ne(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}function oe(){if(ee.current){var e=k(ee.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}Z=!1;var ae={};function ie(e,r){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var t=function(e){var r=oe();if(!r){var t="string"==typeof e?e:e.displayName||e.name;t&&(r="\n\nCheck the top-level render call using <"+t+">.")}return r}(r);if(!ae[t]){ae[t]=!0;var n="";e&&e._owner&&e._owner!==ee.current&&(n=" It was passed a child from "+k(e._owner.type)+"."),te(e),b('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',t,n),te(null)}}}function se(e,r){if("object"==typeof e)if(q(e))for(var t=0;t<e.length;t++){var n=e[t];ne(n)&&ie(n,r)}else if(ne(e))e._store&&(e._store.validated=!0);else if(e){var o=function(e){if(null===e||"object"!=typeof e)return null;var r=g&&e[g]||e["@@iterator"];return"function"==typeof r?r:null}(e);if("function"==typeof o&&o!==e.entries)for(var a,i=o.call(e);!(a=i.next()).done;)ne(a.value)&&ie(a.value,r)}}function ce(e){var r,t=e.type;if(null!=t&&"string"!=typeof t){if("function"==typeof t)r=t.propTypes;else{if("object"!=typeof t||t.$$typeof!==p&&t.$$typeof!==f)return;r=t.propTypes}if(r){var n=k(t);!function(e,r,t,n,o){var a=Function.call.bind(M);for(var i in e)if(a(e,i)){var s=void 0;try{if("function"!=typeof e[i]){var c=Error((n||"React class")+": "+t+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw c.name="Invariant Violation",c}s=e[i](r,i,n,t,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(l){s=l}!s||s instanceof Error||(A(o),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",n||"React class",t,i,typeof s),A(null)),s instanceof Error&&!(s.message in U)&&(U[s.message]=!0,A(o),b("Failed %s type: %s",t,s.message),A(null))}}(r,e.props,"prop",n,e)}else if(void 0!==t.PropTypes&&!Z){Z=!0,b("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",k(t)||"Unknown")}"function"!=typeof t.getDefaultProps||t.getDefaultProps.isReactClassApproved||b("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var le={};function pe(e,r,n,c,g,h){var x=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===i||e===a||e===u||e===d||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===f||e.$$typeof===s||e.$$typeof===l||e.$$typeof===p||e.$$typeof===v||void 0!==e.getModuleId)}(e);if(!x){var j="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(j+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var _;j+=oe(),null===e?_="null":q(e)?_="array":void 0!==e&&e.$$typeof===t?(_="<"+(k(e.type)||"Unknown")+" />",j=" Did you accidentally export a JSX literal instead of a component?"):_=typeof e,b("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",_,j)}var S=Q(e,r,n,g,h);if(null==S)return S;if(x){var w=r.children;if(void 0!==w)if(c)if(q(w)){for(var C=0;C<w.length;C++)se(w[C],e);Object.freeze&&Object.freeze(w)}else b("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else se(w,e)}if(M.call(r,"key")){var O=k(e),R=Object.keys(r).filter(function(e){return"key"!==e}),E=R.length>0?"{key: someKey, "+R.join(": ..., ")+": ...}":"{key: someKey}";if(!le[O+E])b('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',E,O,R.length>0?"{"+R.join(": ..., ")+": ...}":"{}",O),le[O+E]=!0}return e===o?function(e){for(var r=Object.keys(e.props),t=0;t<r.length;t++){var n=r[t];if("children"!==n&&"key"!==n){te(e),b("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",n),te(null);break}}null!==e.ref&&(te(e),b("Invalid attribute `ref` supplied to `React.Fragment`."),te(null))}(S):ce(S),S}var ue=function(e,r,t){return pe(e,r,t,!1)},de=function(e,r,t){return pe(e,r,t,!0)};c.Fragment=o,c.jsx=ue,c.jsxs=de}()),c}var p=(s||(s=1,"production"===process.env.NODE_ENV?o.exports=function(){if(n)return a;n=1;var r=e,t=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,r,n){var o,a={},l=null,p=null;for(o in void 0!==n&&(l=""+n),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(p=r.ref),r)i.call(r,o)&&!c.hasOwnProperty(o)&&(a[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===a[o]&&(a[o]=r[o]);return{$$typeof:t,type:e,key:l,ref:p,props:a,_owner:s.current}}return a.Fragment=o,a.jsx=l,a.jsxs=l,a}():o.exports=l()),o.exports);const u={card:"_card_12yoz_4",tooltip:"_tooltip_12yoz_25",cardBack:"_cardBack_12yoz_48",deckContainer:"_deckContainer_12yoz_61",deckCard:"_deckCard_12yoz_69",deckCardFront:"_deckCardFront_12yoz_82",deckSection:"_deckSection_12yoz_98"};function d(e,...r){console.log(`[${e}]`,...r)}exports.Deck=function({socket:e,deckId:r,name:n,playerId:o=null}){const[a,i]=t.useState([]),[s,c]=t.useState([]);return t.useEffect(()=>(e.on(`deck:init:${r}`,e=>{i(e.currentDeck.map(e=>({...e,deckId:r}))),c(e.drawnCards.map(e=>({...e,deckId:r})))}),e.on(`deck:update:${r}`,e=>{i(e.currentDeck.map(e=>({...e,deckId:r}))),c(e.drawnCards.map(e=>({...e,deckId:r})))}),()=>{e.off(`deck:init:${r}`),e.off(`deck:update:${r}`)}),[e,r]),p.jsxs("section",{className:u.deckSection,children:[p.jsx("h3",{style:{marginBottom:"6px"},children:n}),p.jsxs("div",{className:u.deckControls,children:[p.jsx("button",{onClick:()=>e.emit("deck:shuffle",{deckId:r}),children:"シャッフル"}),p.jsx("button",{onClick:()=>e.emit("deck:reset",{deckId:r}),children:"山札に戻す"})]}),p.jsxs("div",{className:u.deckWrapper,children:[p.jsx("div",{className:u.deckContainer,onClick:()=>{0!==a.length&&e.emit("deck:draw",{deckId:r,playerId:o})},children:a.map((e,r)=>p.jsx("div",{className:u.deckCard,style:{zIndex:a.length-r,transform:`translate(${.5*r}px, ${.5*r}px)`,backgroundColor:e.backColor}},e.id))}),p.jsx("div",{className:u.deckContainer,children:s.map((e,r)=>p.jsx("div",{className:u.deckCardFront,style:{zIndex:r+1,transform:`translate(${.5*r}px, ${.5*r}px)`},children:e.isFaceUp&&e.name},e.id))})]})]})},exports.Dice=function({sides:r=6,socket:t=null,diceId:n,onRoll:o}){const[a,i]=e.useState(null),[s,c]=e.useState(!1),l=e.useRef(null);return e.useEffect(()=>{if(!t)return;const e=e=>{c(!0);let t=0;l.current=setInterval(()=>{const n=Math.floor(Math.random()*r)+1;i(n),t++,t>=20&&(clearInterval(l.current),l.current=null,i(e),c(!1),o?.(e))},50)};return t.on(`dice:rolled:${n}`,e),()=>{t.off(`dice:rolled:${n}`,e),l.current&&clearInterval(l.current)}},[t,r,n,o]),p.jsx("div",{style:{width:"80px",height:"80px",border:"2px solid #333",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",fontWeight:"bold",cursor:s?"not-allowed":"pointer",userSelect:"none",backgroundColor:"#fff",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",transition:"transform 0.2s"},onClick:()=>{t&&!s&&t.emit("dice:roll",{diceId:n,sides:r})},children:a??"🎲"})},exports.PlayField=function({socket:e,deckId:r}){const[n,o]=t.useState([]);return t.useEffect(()=>{const t=e=>{const t=e.playFieldCards||[];d("playField",`[${r}] 場の状態を更新`),d("playField",`[${r}] 古いカード数: ${n.length}, 新しいカード数: ${t.length}`),d("playField",`[${r}] 受信したカードリスト:`,t.map(e=>e.name)),o(e.playFieldCards||[])};return e.on(`deck:update:${r}`,t),()=>{e.off(`deck:update:${r}`,t)}},[e,r]),p.jsxs("section",{style:{border:"2px dashed #ccc",borderRadius:"10px",padding:"12px",margin:"12px 0",background:"#fafafa"},children:[p.jsx("h3",{style:{marginBottom:"8px"},children:"プレイエリア"}),p.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",minHeight:"120px"},children:[0===n.length&&p.jsx("div",{style:{opacity:.6},children:"（まだカードが出ていません）"}),n.map(e=>p.jsxs("div",{style:{width:"80px",height:"120px",border:"1px solid #999",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",background:"white",boxShadow:"2px 2px 4px rgba(0,0,0,0.1)",cursor:"pointer",position:"relative"},onMouseEnter:e=>{const r=e.currentTarget.querySelector(".tooltip");r&&(r.style.display="block")},onMouseLeave:e=>{const r=e.currentTarget.querySelector(".tooltip");r&&(r.style.display="none")},children:[e.name,e.description&&p.jsx("span",{className:"tooltip",style:{display:"none",position:"absolute",bottom:"110%",left:"50%",transform:"translateX(-50%)",padding:"6px 10px",background:"#333",color:"white",borderRadius:"4px",whiteSpace:"nowrap",zIndex:1e3,fontSize:"12px"},children:e.description})]},e.id))]})]})},exports.ScoreBoard=function({socket:e,players:r,currentPlayerId:n,myPlayerId:o,backColor:a="#000000ff"}){const[i,s]=t.useState([]),c=(r||[]).map(e=>({...e,score:e.score??0,cards:e.cards??[]}));return p.jsxs("div",{style:{padding:"12px",border:"1px solid #ccc",borderRadius:"8px"},children:[p.jsx("h2",{children:"Scoreboard"}),p.jsx("ul",{style:{listStyle:"none",padding:0},children:c.map(e=>p.jsxs("li",{style:{padding:"6px 12px",marginBottom:"6px",borderRadius:"4px",backgroundColor:e.id===n?"#a0e7ff":"#f5f5f5",fontWeight:e.id===n?"bold":"normal"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsxs("span",{children:[e.id===o&&"⭐️"," ",e.name]}),p.jsx("span",{children:e.score})]}),p.jsx("div",{style:{display:"flex",gap:"6px",marginTop:"6px",flexWrap:"wrap"},children:e.cards.map(r=>{const t=!!r.isFaceUp&&e.id===o,n=i.includes(r.id);return p.jsxs("div",{className:t?u.card:u.cardBack,style:{position:"relative",cursor:t?"pointer":"default",width:"60px",height:"80px",backgroundColor:t?void 0:r.backColor,border:n?"2px solid gold":"none",boxSizing:"border-box"},onClick:()=>((e,r)=>{r&&s(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])})(r.id,t),children:[t&&r.name,t&&r.description&&p.jsx("span",{className:u.tooltip,children:r.description})]},r.id)})})]},e.id))}),p.jsxs("div",{style:{marginTop:"12px",display:"flex",gap:"6px"},children:[p.jsx("button",{onClick:()=>{if(0===i.length||!o)return;const r=c.find(e=>e.id===o);if(!r)return;const t={};i.forEach(e=>{const n=r.cards.find(r=>r.id===e);n&&(t[n.deckId]||(t[n.deckId]=[]),t[n.deckId].push(n.id))}),Object.entries(t).forEach(([r,t])=>{e.emit("card:play",{deckId:r,cardIds:t,playerId:o,playLocation:"field"})}),s([])},disabled:0===i.length,children:"選択カードを出す"}),p.jsx("button",{onClick:()=>e.emit("game:next-turn"),children:"次のターン"})]})]})},exports.Timer=function({socket:r=null,onFinish:t}){const[n,o]=e.useState(null);return e.useEffect(()=>{if(!r)return;const e=e=>{o(e)},n=e=>{o(e),e<=0&&t?.()};return r.on("timer:start",e),r.on("timer:update",n),()=>{r.off("timer:start",e),r.off("timer:update",n)}},[r,t]),p.jsxs("div",{style:{width:"300px",height:"80px",border:"2px solid #333",borderRadius:"8px",padding:"8px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f9f9f9",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",fontFamily:"sans-serif"},children:[p.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:null!==n?n<=6?"red":n<=15?"orange":"green":"gray",transition:"color 0.5s ease"},children:["残り時間: ",n??"-","s"]}),p.jsx("div",{style:{marginTop:"6px"},children:p.jsx("button",{onClick:()=>{r&&r.emit("timer:start",30)},style:{marginRight:"4px"},children:"開始"})})]})};
